api_version: "2.0"
name: iwr or Invoke Web-Request download
description: |
    Use 'iwr' or "Invoke-WebRequest" -URI argument to download a file from the web. Note: without -URI also works in some versions.
args:
    - name: local_path
      type: path
      default: '%temp%\Atomic-license.txt'
    - name: remote_file
      type: string
      default: https://raw.githubusercontent.com/redcanaryco/atomic-red-team/master/LICENSE.txt
uuid: c01cad7f-7a4c-49df-985e-b190dcf6a279
mitre:
    tactics:
        - 'TA0011: Command and Control'
    techniques:
        - 'T1105: Ingress Tool Transfer'
requirements:
    platforms:
        - os: windows
steps:
    - name: iwr-or-invoke-web-request-download
      inline: |
        powershell.exe iwr -URI {{.Args.remote_file}} -Outfile {{.Args.local_path}}
      executor: command_prompt
      cleanup:
        inline: |
            del %temp%\Atomic-license.txt >nul 2>&1
        executor: command_prompt
