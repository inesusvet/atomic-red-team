api_version: "2.0"
name: Create and Execute Bash Shell Script
description: |
    Creates and executes a simple sh script.
args:
    - name: script_path
      type: path
      default: /tmp/art.sh
    - name: host
      type: string
      default: 8.8.8.8
uuid: 7e7ac3ed-f795-4fa5-b711-09d6fbe9b873
mitre:
    tactics:
        - 'TA0002: Execution'
    techniques:
        - 'T1059: Command and Scripting Interpreter'
    subtechniques:
        - 'T1059.004: Unix Shell'
requirements:
    platforms:
        - os: linux
        - os: darwin
steps:
    - name: create-and-execute-bash-shell-script
      inline: |
        sh -c "echo 'echo Hello from the Atomic Red Team' > {{.Args.script_path}}"
        sh -c "echo 'ping -c 4 {{.Args.host}}' >> {{.Args.script_path}}"
        chmod +x {{.Args.script_path}}
        sh {{.Args.script_path}}
      executor: sh
      cleanup:
        inline: |
            rm {{.Args.script_path}}
        executor: sh
