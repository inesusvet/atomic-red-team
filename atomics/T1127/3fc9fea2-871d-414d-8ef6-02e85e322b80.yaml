api_version: "2.0"
name: Lolbin Jsc.exe compile javascript to dll
description: |
    Use jsc.exe to compile javascript code stored in Library.js and output Library.dll.
    https://lolbas-project.github.io/lolbas/Binaries/Jsc/
    https://www.phpied.com/make-your-javascript-a-windows-exe/
args:
    - name: jscname
      type: path
      default: jsc.exe
    - name: filename
      type: path
      default: PathToAtomicsFolder\T1127\src\LibHello.js
    - name: jscpath
      type: path
      default: C:\Windows\Microsoft.NET\Framework\v4.0.30319
uuid: 3fc9fea2-871d-414d-8ef6-02e85e322b80
mitre:
    tactics:
        - 'TA0005: Defense Evasion'
    techniques:
        - 'T1127: Trusted Developer Utilities Proxy Execution'
requirements:
    platforms:
        - os: windows
steps:
    - name: lolbin-jsc.exe-compile-javascript-to-dll
      inline: |
        copy "{{.Args.filename}}" %TEMP%\LibHello.js
        {{.Args.jscpath}}\{{.Args.jscname}} /t:library %TEMP%\LibHello.js
      executor: command_prompt
      cleanup:
        inline: |
            del %TEMP%\LibHello.js
            del %TEMP%\LibHello.dll
        executor: command_prompt
